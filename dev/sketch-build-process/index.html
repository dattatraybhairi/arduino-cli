



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Arduino Command Line Interface">
      
      
        <link rel="canonical" href="https://arduino.github.io/arduino-cli/sketch-build-process/">
      
      
      <link rel="shortcut icon" href="..">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.14">
    
    
      
        <title>Sketch build process - Arduino CLI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7533c066.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.ff0a5ce4.min.css">
      
      
        
        
        <meta name="theme-color" content="#009485">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/version-select.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    <div id="arduino-header" class="temporary">
    </div>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://arduino.github.io/arduino-cli/" title="Arduino CLI" class="md-nav__button md-logo" aria-label="Arduino CLI">
      
  <img src="../img/icon_mac_light.png" alt="logo">

    </a>
    Arduino CLI
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/arduino/arduino-cli" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    arduino/arduino-cli
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Documentation Home" class="md-nav__link">
      Documentation Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../command-line-completion/" title="Command line completion" class="md-nav__link">
      Command line completion
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="How to contribute" class="md-nav__link">
      How to contribute
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Command reference
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Command reference" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Command reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli/" title="arduino-cli" class="md-nav__link">
      arduino-cli
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board/" title="board" class="md-nav__link">
      board
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board_attach/" title="board attach" class="md-nav__link">
      board attach
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board_details/" title="board details" class="md-nav__link">
      board details
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board_list/" title="board list" class="md-nav__link">
      board list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board_listall/" title="board listall" class="md-nav__link">
      board listall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_burn-bootloader/" title="burn-bootloader" class="md-nav__link">
      burn-bootloader
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_cache/" title="cache" class="md-nav__link">
      cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_cache_clean/" title="cache clean" class="md-nav__link">
      cache clean
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_compile/" title="compile" class="md-nav__link">
      compile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_completion/" title="completion" class="md-nav__link">
      completion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_config/" title="config" class="md-nav__link">
      config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_config_dump/" title="config dump" class="md-nav__link">
      config dump
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_config_init/" title="config init" class="md-nav__link">
      config init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core/" title="core" class="md-nav__link">
      core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_download/" title="core download" class="md-nav__link">
      core download
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_install/" title="core install" class="md-nav__link">
      core install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_list/" title="core list" class="md-nav__link">
      core list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_search/" title="core search" class="md-nav__link">
      core search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_uninstall/" title="core uninstall" class="md-nav__link">
      core uninstall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_update-index/" title="core update index" class="md-nav__link">
      core update index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_upgrade/" title="core upgrade" class="md-nav__link">
      core upgrade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_daemon/" title="daemon" class="md-nav__link">
      daemon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_debug/" title="debug" class="md-nav__link">
      debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib/" title="lib" class="md-nav__link">
      lib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_deps/" title="lib deps" class="md-nav__link">
      lib deps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_download/" title="lib download" class="md-nav__link">
      lib download
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_install/" title="lib install" class="md-nav__link">
      lib install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_list/" title="lib list" class="md-nav__link">
      lib list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_search/" title="lib search" class="md-nav__link">
      lib search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_uninstall/" title="lib uninstall" class="md-nav__link">
      lib uninstall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_update-index/" title="lib update-index" class="md-nav__link">
      lib update-index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_upgrade/" title="lib upgrade" class="md-nav__link">
      lib upgrade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_outdated/" title="outdated" class="md-nav__link">
      outdated
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_sketch/" title="sketch" class="md-nav__link">
      sketch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_sketch_new/" title="sketch new" class="md-nav__link">
      sketch new
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_update/" title="update" class="md-nav__link">
      update
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_upgrade/" title="upgrade" class="md-nav__link">
      upgrade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_upload/" title="upload" class="md-nav__link">
      upload
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_version/" title="version" class="md-nav__link">
      version
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      gRPC reference
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="gRPC reference" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        gRPC reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../rpc/commands/" title="commands" class="md-nav__link">
      commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rpc/monitor/" title="monitor" class="md-nav__link">
      monitor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rpc/settings/" title="settings" class="md-nav__link">
      settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rpc/debug/" title="debug" class="md-nav__link">
      debug
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../integration-options/" title="Integration options" class="md-nav__link">
      Integration options
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Sketch build process
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="Sketch build process" class="md-nav__link md-nav__link--active">
      Sketch build process
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-processing" class="md-nav__link">
    Pre-Processing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-resolution" class="md-nav__link">
    Dependency Resolution
  </a>
  
    <nav class="md-nav" aria-label="Dependency Resolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-matching" class="md-nav__link">
    Architecture Matching
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folder-name-priority" class="md-nav__link">
    Folder Name Priority
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location-priority" class="md-nav__link">
    Location Priority
  </a>
  
    <nav class="md-nav" aria-label="Location Priority">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#location-priorities-in-arduino-web-editor" class="md-nav__link">
    Location priorities in Arduino Web Editor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation" class="md-nav__link">
    Compilation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading" class="md-nav__link">
    Uploading
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../sketch-specification/" title="Sketch specification" class="md-nav__link">
      Sketch specification
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../library-specification/" title="Library specification" class="md-nav__link">
      Library specification
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../platform-specification/" title="Platform specification" class="md-nav__link">
      Platform specification
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../package_index_json-specification/" title="package_index.json specification" class="md-nav__link">
      package_index.json specification
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-processing" class="md-nav__link">
    Pre-Processing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-resolution" class="md-nav__link">
    Dependency Resolution
  </a>
  
    <nav class="md-nav" aria-label="Dependency Resolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-matching" class="md-nav__link">
    Architecture Matching
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folder-name-priority" class="md-nav__link">
    Folder Name Priority
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location-priority" class="md-nav__link">
    Location Priority
  </a>
  
    <nav class="md-nav" aria-label="Location Priority">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#location-priorities-in-arduino-web-editor" class="md-nav__link">
    Location priorities in Arduino Web Editor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation" class="md-nav__link">
    Compilation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading" class="md-nav__link">
    Uploading
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                  <h1>Sketch build process</h1>
                
                <p>The process the Arduino development software uses to build a sketch. More useful information can be found in the
<a href="../platform-specification/">Arduino platform specification</a>. Note that the following refers specifically to the build
process for AVR targets. Other architectures will have a similar build process.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>A number of things have to happen for your Arduino code to get onto the Arduino board. First, the Arduino development
software performs some minor pre-processing to turn your sketch into a C++ program. Next, dependencies of the sketch are
located. It then gets passed to a compiler (avr-gcc), which turns the human readable code into machine readable
instructions (or object files). Then your code gets combined with (linked against) the standard Arduino libraries that
provide basic functions like <code>digitalWrite()</code> or <code>Serial.print()</code>. The result is a single Intel hex file, which contains
the specific bytes that need to be written to the program memory of the chip on the Arduino board. This file is then
uploaded to the board: transmitted over the USB or serial connection via the bootloader already on the chip or with
external programming hardware.</p>
<h2 id="pre-processing">Pre-Processing<a class="headerlink" href="#pre-processing" title="Permanent link">&para;</a></h2>
<p>The Arduino development software performs a few transformations to your sketch before passing it to the avr-gcc
compiler:</p>
<ul>
<li>All .ino and .pde files in the sketch folder (shown in the Arduino IDE as tabs with no extension) are concatenated
  together, starting with the file that matches the folder name followed by the others in alphabetical order. The .cpp
  filename extension is then added to the resulting file.</li>
<li>If not already present, <code>#include &lt;Arduino.h&gt;</code> is added to the sketch. This header file (found in the core folder for
  the currently selected board) includes all the definitions needed for the standard Arduino core.</li>
<li>Prototypes are generated for all function definitions in .ino/.pde files that don't already have prototypes. In some
  rare cases, prototype generation may fail for some functions. To work around this, you can provide your own prototypes
  for these functions.</li>
<li><code>#line</code> directives are added to make warning or error messages reflect the original sketch layout.</li>
</ul>
<p>No pre-processing is done to files in a sketch with any extension other than .ino or .pde. Additionally, .h files in the
sketch are not automatically #included from the main sketch file. Further, if you want to call functions defined in a .c
file from a .cpp file (like one generated from your sketch), you'll need to wrap its declarations in an <code>extern "C" {}</code>
block that is defined only inside of C++ files.</p>
<h2 id="dependency-resolution">Dependency Resolution<a class="headerlink" href="#dependency-resolution" title="Permanent link">&para;</a></h2>
<p>The sketch is scanned recursively for dependencies. There are predefined include search paths:</p>
<ol>
<li>Core library folder (as defined by <a href="../platform-specification/#boardstxt"><code>{build.core}</code></a>)</li>
<li>Variant folder (as defined by <a href="../platform-specification/#boardstxt"><code>{build.variant}</code></a>)</li>
<li>Standard system directories (e.g., <a href="../platform-specification/#tools"><code>{runtime.tools.avr-gcc.path}/avr/include</code></a>)</li>
<li>Include search paths added to resolve prior dependencies</li>
</ol>
<p>If the dependency is not present in any of those locations, the installed libraries are then searched (see the
<a href="#location-priority"><strong>Location Priority</strong> table</a> below for library locations). For information on the allowed library
sub-folder structures see <a href="../library-specification/#source-code">the Arduino library specification</a>. <code>-I</code> options are
generated for the path to each library dependency and appended to the
<a href="../platform-specification/#recipes-to-compile-source-code"><code>includes</code> property</a>, to be used in
<a href="../platform-specification/#recipes-to-compile-source-code">compilation recipes</a> in platform.txt.</p>
<p>If multiple libraries contain a file that matches the <code>#include</code> directive, the priority is determined by applying the
following rules, one by one in this order, until a rule determines a winner:</p>
<ol>
<li>A library that is architecture compatible wins against a library that is not architecture compatible (see
   <a href="#architecture-matching"><strong>Architecture Matching</strong></a>)</li>
<li>A library that has better "folder name priority" wins (see <a href="#folder-name-priority"><strong>Folder Name Priority</strong></a>)</li>
<li>A library that is architecture optimized wins against a library that is not architecture optimized (see
   <a href="#architecture-matching"><strong>Architecture Matching</strong></a>)</li>
<li>A library that has a better "location priority" wins (see <a href="#location-priority"><strong>Location Priority</strong></a>)</li>
<li>A library that has a folder name with a better score using the "closest-match" algorithm wins</li>
<li>A library that has a folder name that comes first in alphanumeric order wins</li>
</ol>
<h3 id="architecture-matching">Architecture Matching<a class="headerlink" href="#architecture-matching" title="Permanent link">&para;</a></h3>
<p>A library is considered <strong>compatible</strong> with architecture <code>X</code> if the <code>architectures</code> field in
<a href="../library-specification/#library-metadata">library.properties</a>:</p>
<ul>
<li>explicitly contains the architecture <code>X</code></li>
<li>contains the catch-all <code>*</code></li>
<li>is not specified at all.</li>
</ul>
<p>A library is considered <strong>optimized</strong> for architecture <code>X</code> only if the <code>architectures</code> field in library.properties
explicitly contains the architecture <code>X</code>. This means that a library that is optimized for architecture <code>X</code> is also
compatible with it.</p>
<p>Examples:</p>
<table>
<thead>
<tr>
<th><code>architectures</code> field in <code>library.properties</code></th>
<th>Compatible with <code>avr</code></th>
<th>Optimized for <code>avr</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>not specified</td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td><code>architectures=*</code></td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td><code>architectures=avr</code></td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td><code>architectures=*,avr</code></td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td><code>architectures=*,esp8266</code></td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td><code>architectures=avr,esp8266</code></td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td><code>architectures=samd</code></td>
<td>NO</td>
<td>NO</td>
</tr>
</tbody>
</table>
<h3 id="folder-name-priority">Folder Name Priority<a class="headerlink" href="#folder-name-priority" title="Permanent link">&para;</a></h3>
<p>The "folder name priority" is determined as follows (in order of highest to lowest priority):</p>
<table>
<thead>
<tr>
<th>Rule</th>
<th>Example for <code>Servo.h</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>The folder name matches the include 100%</td>
<td><code>Servo</code></td>
</tr>
<tr>
<td>The folder name matches the include 100%, except with a <code>-master</code> suffix</td>
<td><code>Servo-master</code></td>
</tr>
<tr>
<td>The folder name has a matching prefix</td>
<td><code>ServoWhatever</code></td>
</tr>
<tr>
<td>The folder name has a matching suffix</td>
<td><code>AwesomeServo</code></td>
</tr>
<tr>
<td>The folder name contains the include</td>
<td><code>AnAwesomeServoForWhatever</code></td>
</tr>
</tbody>
</table>
<h3 id="location-priority">Location Priority<a class="headerlink" href="#location-priority" title="Permanent link">&para;</a></h3>
<p>The "location priority" is determined as follows (in order of highest to lowest priority):</p>
<ol>
<li>The library is under a custom libraries path specified via the
   <a href="../commands/arduino-cli_compile/#options"><code>--libraries</code> option</a> of <code>arduino-cli compile</code> (in decreasing order of
   priority when multiple custom paths are defined)</li>
<li>The library is under the <code>libraries</code> subfolder of the IDE's sketchbook or Arduino CLI's user directory</li>
<li>The library is bundled with the board platform/core
   (<a href="../platform-specification/#global-predefined-properties"><code>{runtime.platform.path}/libraries</code></a>)</li>
<li>The library is bundled with the <a href="../platform-specification/#referencing-another-core-variant-or-tool">referenced</a>
   board platform/core</li>
<li>The library is bundled with the Arduino IDE
   (<a href="../platform-specification/#global-predefined-properties"><code>{runtime.ide.path}/libraries</code></a>)<ul>
<li>This location is only used by Arduino CLI when it's located in the Arduino IDE installation folder</li>
</ul>
</li>
</ol>
<h4 id="location-priorities-in-arduino-web-editor">Location priorities in Arduino Web Editor<a class="headerlink" href="#location-priorities-in-arduino-web-editor" title="Permanent link">&para;</a></h4>
<p>The location priorities system works in the same manner in <a href="https://create.arduino.cc/editor">Arduino Web Editor</a>, but
its cloud-based nature may make the locations of libraries less obvious.</p>
<ol>
<li><strong>Custom</strong>: the imported libraries, shown under the <strong>Libraries &gt; Custom</strong> tab.<ul>
<li>These libraries are under <code>/tmp/\&lt;some number&gt;/custom</code></li>
</ul>
</li>
<li><strong>Pinned</strong>: libraries that were <a href="../sketch-specification/#metadata">associated with the sketch</a> by choosing a specific
   version from the library's "Include" dropdown menu.<ul>
<li>These libraries are under <code>/tmp/\&lt;some number&gt;/pinned</code></li>
<li>Note: clicking the "Include" button does not result in the library being pinned to the sketch.</li>
</ul>
</li>
<li><strong><a href="../platform-specification/#platform-bundled-libraries">Platform bundled</a></strong>: these are listed under the
   <strong>Libraries &gt; Default</strong> tab, but with "for \&lt;architecture name>" appended to the library name (e.g., "SPI for AVR").<ul>
<li>These libraries are under <code>/home/builder/.arduino15/packages</code>
 1. <a href="../platform-specification/#platform-terminology">Board platform</a> bundled
 1. <a href="../platform-specification/#platform-terminology">Core platform</a> bundled</li>
</ul>
</li>
<li><strong>Built-in</strong>:<ul>
<li>The non-platform bundled libraries listed under the <strong>Libraries &gt; Default</strong> tab.</li>
<li>Libraries listed under <strong>Libraries &gt; Library Manager</strong>.</li>
<li>These libraries are under <code>/home/builder/opt/libraries/latest</code></li>
</ul>
</li>
</ol>
<h2 id="compilation">Compilation<a class="headerlink" href="#compilation" title="Permanent link">&para;</a></h2>
<p>Sketches are compiled by avr-gcc and avr-g++ according to the variables in the boards.txt file of the selected board's
<a href="../platform-specification/">platform</a>.</p>
<p>The sketch is built in a temporary directory in the system-wide temporary directory (e.g. /tmp on Linux).</p>
<p>Files taken as source files for the build process are .S, .c and .cpp files (including the .cpp file generated from the
sketch's .ino and .pde files during the sketch pre-processing step). Source files of the target are compiled and output
with .o extensions to this build directory, as are the main sketch files and any other source files in the sketch and
any source files in any libraries which are <code>#include</code>d in the sketch.</p>
<p>Before compiling a source file, an attempt is made to reuse the previously compiled .o file, which speeds up the build
process. A special .d (dependency) file provides a list of all other files included by the source. The compile step is
skipped if the .o and .d files exist and have timestamps newer than the source and all the dependent files. If the
source or any dependent file has been modified, or any error occurs verifying the files, the compiler is run normally,
writing a new .o &amp; .d file. After a new board is selected from the IDE's Board menu, all source files are rebuilt on the
next compile.</p>
<p>These .o files are then linked together into a static library and the main sketch file is linked against this library.
Only the parts of the library needed for your sketch are included in the final .hex file, reducing the size of most
sketches.</p>
<p>The .hex file is the final output of the compilation which is then uploaded to the board.</p>
<p>If verbose output during compilation is enabled, the complete command line of each external command executed as part of
the build process will be printed in the console.</p>
<h2 id="uploading">Uploading<a class="headerlink" href="#uploading" title="Permanent link">&para;</a></h2>
<p>Sketches are uploaded by avrdude. The upload process is also controlled by variables in the boards and main preferences
files. See the <a href="../platform-specification/">Arduino platform specification</a> page for details.</p>
<p>If verbose output during upload is enabled, debugging information will be output to the console, including avrdude
command lines and verbose output.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../integration-options/" title="Integration options" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Integration options
              </div>
            </div>
          </a>
        
        
          <a href="../sketch-specification/" title="Sketch specification" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Sketch specification
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div id="arduino-footer"></div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.581c8fc6.min.js"></script>
      <script src="../assets/javascripts/bundle.66a8d459.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      <link rel="stylesheet" href="https://cdn.arduino.cc/header-footer/prod/index.v2.css">
      <script src="https://cdn.arduino.cc/header-footer/prod/index.v2.js"></script>
      <script>window.auth=new arduinoHF.CustomAuth({no_auth:!0})</script>
      <script>window.arduinoHeader=new window.arduinoHF.Header(document.getElementById("arduino-header"),window.auth,{env:"prod",style:"arduino",search:{tab:"reference"}}),window.arduinoFooter=new window.arduinoHF.Footer(document.getElementById("arduino-footer"),{env:"prod",style:"arduino"})</script>
      
      
        <script src="../js/version-select.js"></script>
      
        <script src="../search/main.js"></script>
      
    
  </body>
</html>